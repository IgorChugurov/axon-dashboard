# –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã: –º–∏–≥–∞–Ω–∏–µ –∏ —Å–±—Ä–æ—Å –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

**–î–∞—Ç–∞:** 2025-01-28  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –º–∏–≥–∞–µ—Ç –∏ —Å–Ω–æ–≤–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

### –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—ã—Ç–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å—Ç–∏–Ω—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:**

1. URL (–±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è)
2. sessionStorage (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
3. React state (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)

**–ù–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û**, —Å–æ–∑–¥–∞–≤–∞—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ –≥–æ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π.

---

## üìä –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 3, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞–∑–∞–¥

#### –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–ø–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä)

```typescript
// use-list-params.ts, —Å—Ç—Ä–æ–∫–∏ 43-73

const searchParams = useSearchParams();  // URL –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º: ? (–±–µ–∑ page)
const storedState = loadListState(...);  // sessionStorage: { page: 3, limit: 20 }

// URL –ø—É—Å—Ç–æ–π ‚Üí urlPage = null
const urlPage = searchParams.get("page");  // null
const urlSearch = searchParams.get("search");  // null

// mergeListState: URL (null) < sessionStorage (page: 3) ‚Üí mergedState.page = 3
const mergedState = mergeListState(
  { page: null, search: null },  // URL –ø—É—Å—Ç–æ–π
  { page: 3, limit: 20 },        // sessionStorage
  { page: 1, limit: 20 }         // defaults
);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: mergedState.page = 3 ‚úÖ

// useState –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –û–î–ò–ù –†–ê–ó —Å mergedState
const [params, setParamsState] = useState({
  page: 3,  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
  limit: 20,
  search: undefined
});
```

**–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** `params.page = 3`

---

#### –®–∞–≥ 2: useEffect —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å URL (—Å—Ç—Ä–æ–∫–∞ 156-185)

```typescript
// use-list-params.ts, —Å—Ç—Ä–æ–∫–∏ 156-185

useEffect(() => {
  const currentPage = params.page; // 3
  const currentSearch = params.search || "";

  // needsUrlRestoreRef.current = true (URL –ø—É—Å—Ç–æ–π, –Ω–æ storedState.page = 3)
  if (needsUrlRestoreRef.current) {
    prevUrlParamsRef.current = { page: 3, search: "" };
    updateURL({ page: 3, search: "" }); // –û–±–Ω–æ–≤–ª—è–µ–º URL: ?page=3
    needsUrlRestoreRef.current = false;
    return;
  }
  // ...
}, [params.page, params.search]);
```

**–ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å!**

`updateURL` –≤—ã–∑—ã–≤–∞–µ—Ç `router.replace('?page=3')`, —á—Ç–æ:

1. –û–±–Ω–æ–≤–ª—è–µ—Ç URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. **–¢—Ä–∏–≥–≥–µ—Ä–∏—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞** (Next.js App Router —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL)
3. `useSearchParams()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ù–û–í–´–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

#### –®–∞–≥ 3: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL

```typescript
// use-list-params.ts, —Å—Ç—Ä–æ–∫–∏ 43-73 (–í–¢–û–†–û–ô –†–ï–ù–î–ï–†)

const searchParams = useSearchParams();  // –¢–µ–ø–µ—Ä—å URL: ?page=3
const storedState = loadListState(...);  // sessionStorage: { page: 3, limit: 20 }

const urlPage = searchParams.get("page");  // "3" (—Å—Ç—Ä–æ–∫–∞!)
const urlSearch = searchParams.get("search");  // null

// –í–∞–ª–∏–¥–∞—Ü–∏—è
const validatedUrlPage = parseInt("3", 10);  // 3 ‚úÖ

// mergeListState: URL (page: 3) > sessionStorage ‚Üí mergedState.page = 3
const mergedState = mergeListState(
  { page: 3, search: null },     // URL —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç page=3
  { page: 3, limit: 20 },        // sessionStorage
  { page: 1, limit: 20 }          // defaults
);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: mergedState.page = 3 ‚úÖ

// –ù–û! useState –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!
const [params, setParamsState] = useState({
  page: 3,  // –û—Å—Ç–∞–µ—Ç—Å—è 3, –ù–û...
  limit: 20,
  search: undefined
});
```

**–ü–æ–∫–∞ –≤—Å–µ –µ—â–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ...**

---

#### –®–∞–≥ 4: React Query –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

```typescript
// use-list-query.ts

const queryKey = getListQueryKey(projectId, serviceType, {
  page: 3, // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
  limit: 20,
  search: undefined,
});

// React Query –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 3
const { data, pagination } = useQuery({
  queryKey,
  queryFn: () => onLoadData({ page: 3, limit: 20 }),
});
```

**–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 3.**

---

## üîç –ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±—Ä–æ—Å –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É?

### –ü—Ä–æ–±–ª–µ–º–∞ 1: `useState` –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:**

```typescript
// use-list-params.ts, —Å—Ç—Ä–æ–∫–∏ 76-80

// mergedState –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –ö–ê–ñ–î–û–ú —Ä–µ–Ω–¥–µ—Ä–µ
const mergedState = mergeListState(...);

// –ù–û useState –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ü–†–ò –ü–ï–†–í–û–ú –†–ï–ù–î–ï–†–ï
const [params, setParamsState] = useState({
  page: mergedState.page,  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ!
  limit: mergedState.limit,
  search: mergedState.search || undefined,
});
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ URL –∏–∑–º–µ–Ω–∏—Ç—Å—è –ü–û–°–õ–ï –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É), `useState` –ù–ï –æ–±–Ω–æ–≤–∏—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!

**–ü—Ä–∏–º–µ—Ä:**

1. –ü–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä: URL –ø—É—Å—Ç–æ–π ‚Üí mergedState.page = 3 (–∏–∑ sessionStorage) ‚Üí useState({ page: 3 })
2. –í—Ç–æ—Ä–æ–π —Ä–µ–Ω–¥–µ—Ä: URL = ?page=3 ‚Üí mergedState.page = 3 ‚Üí **–Ω–æ useState —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**
3. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–±—Ä–æ—Å–∏—Ç URL –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ø—É—Å—Ç–æ–π ‚Üí mergedState.page = 3 ‚Üí **–Ω–æ useState –≤—Å–µ –µ—â–µ { page: 3 }**

**–ù–û!** –ï—Å–ª–∏ URL –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ `?page=1` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑-–∑–∞ –∫–∞–∫–æ–≥–æ-—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∞), —Ç–æ:

- mergedState.page = 1 (–∏–∑ URL)
- –ù–æ useState –≤—Å–µ –µ—â–µ { page: 3 }
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç!**

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É URL –∏ params

```typescript
// use-list-params.ts

// 1. params –∏–∑–º–µ–Ω—è–µ—Ç—Å—è ‚Üí useEffect –æ–±–Ω–æ–≤–ª—è–µ—Ç URL (—Å—Ç—Ä–æ–∫–∞ 156)
useEffect(() => {
  updateURL({ page: params.page });  // params.page = 3 ‚Üí URL = ?page=3
}, [params.page, params.search]);

// 2. URL –∏–∑–º–µ–Ω—è–µ—Ç—Å—è ‚Üí searchParams –∏–∑–º–µ–Ω—è–µ—Ç—Å—è ‚Üí mergedState –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
const mergedState = mergeListState(...);

// 3. –ù–û mergedState –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ params!
// useState —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï—Å–ª–∏ URL –∏–∑–º–µ–Ω–∏—Ç—Å—è –∏–∑–≤–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"), `params` –ù–ï –æ–±–Ω–æ–≤–∏—Ç—Å—è!

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: `loadListState` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ

```typescript
// use-list-params.ts, —Å—Ç—Ä–æ–∫–∞ 47

const storedState = loadListState(projectId, serviceType);
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ. –ï—Å–ª–∏ sessionStorage –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞, —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

**–ë–æ–ª–µ–µ —Ç–æ–≥–æ:** –ï—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ, `loadListState` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –î–û —Ç–æ–≥–æ, –∫–∞–∫ cleanup —ç—Ñ—Ñ–µ–∫—Ç —É—Å–ø–µ–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

```typescript
// mergeListState: URL > sessionStorage > defaults

// –ù–æ —á—Ç–æ –µ—Å–ª–∏:
// 1. URL = ?page=1 (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏–ª)
// 2. sessionStorage = { page: 3 } (—Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
// 3. mergedState.page = 1 (–∏–∑ URL) ‚úÖ
// 4. useState —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å page: 3 ‚ùå
// 5. –ö–æ–Ω—Ñ–ª–∏–∫—Ç!
```

---

## üéØ –£–∑–∫–∏–µ –º–µ—Å—Ç–∞ (Bottlenecks)

### –£–∑–∫–æ–µ –º–µ—Å—Ç–æ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è useState —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

**–§–∞–π–ª:** `use-list-params.ts`, —Å—Ç—Ä–æ–∫–∏ 76-80

**–ü—Ä–æ–±–ª–µ–º–∞:**

- `mergedState` –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- –ù–æ `useState` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- –ï—Å–ª–∏ `mergedState` –∏–∑–º–µ–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞, `params` –ù–ï –æ–±–Ω–æ–≤–∏—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**

- –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useEffect` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ `mergedState` ‚Üí `params`
- –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useMemo` –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ `mergedState`
- –õ–∏–±–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–¥—Ö–æ–¥

---

### –£–∑–∫–æ–µ –º–µ—Å—Ç–æ 2: –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è URL ‚Üî params

**–§–∞–π–ª:** `use-list-params.ts`, —Å—Ç—Ä–æ–∫–∏ 156-185

**–ü—Ä–æ–±–ª–µ–º–∞:**

- `params` ‚Üí `URL` (—á–µ—Ä–µ–∑ useEffect)
- –ù–æ `URL` ‚Üí `params` –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç (useState –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï—Å–ª–∏ URL –∏–∑–º–µ–Ω–∏—Ç—Å—è –∏–∑–≤–Ω–µ (–±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è), `params` –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–º.

---

### –£–∑–∫–æ–µ –º–µ—Å—Ç–æ 3: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ URL ‚Üí params

**–§–∞–π–ª:** `use-list-params.ts`

**–ü—Ä–æ–±–ª–µ–º–∞:**

- –ù–µ—Ç useEffect, –∫–æ—Ç–æ—Ä—ã–π –±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è `searchParams` –∏ –æ–±–Ω–æ–≤–ª—è–ª `params`
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–º–µ—Ç "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ, URL –∏–∑–º–µ–Ω–∏—Ç—Å—è, –Ω–æ `params` –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º

---

### –£–∑–∫–æ–µ –º–µ—Å—Ç–æ 4: –ì–æ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ URL

**–§–∞–π–ª:** `use-list-params.ts`, —Å—Ç—Ä–æ–∫–∏ 86-88, 156-185

**–ü—Ä–æ–±–ª–µ–º–∞:**

```typescript
// needsUrlRestoreRef –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
const needsUrlRestoreRef = useRef(
  !urlPage && storedState && storedState.page !== 1
);

// –ï—Å–ª–∏ —ç—Ç–æ true, useEffect –æ–±–Ω–æ–≤–∏—Ç URL
// –ù–æ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ü–û–°–õ–ï —Ç–æ–≥–æ, –∫–∞–∫ React Query —É–∂–µ –Ω–∞—á–∞–ª –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–ª—è page=3, –Ω–æ URL –µ—â–µ ? (–ø—É—Å—Ç–æ–π)
// –ó–∞—Ç–µ–º URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ ?page=3
// –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –∏ –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö
```

---

## üîÑ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):

```
1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
   ‚îú‚îÄ URL: ? (–ø—É—Å—Ç–æ–π)
   ‚îú‚îÄ sessionStorage: { page: 3 }
   ‚îú‚îÄ mergedState.page = 3 (–∏–∑ sessionStorage)
   ‚îî‚îÄ useState({ page: 3 }) ‚úÖ

2. useEffect —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å URL (—Å—Ç—Ä–æ–∫–∞ 156)
   ‚îú‚îÄ needsUrlRestoreRef.current = true
   ‚îú‚îÄ updateURL({ page: 3 })
   ‚îî‚îÄ URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è: ?page=3

3. Next.js App Router —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL
   ‚îú‚îÄ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è
   ‚îú‚îÄ searchParams —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç page=3
   ‚îú‚îÄ mergedState.page = 3 (–∏–∑ URL)
   ‚îî‚îÄ –ù–û useState —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

4. React Query –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
   ‚îú‚îÄ queryKey –≤–∫–ª—é—á–∞–µ—Ç page: 3 ‚úÖ
   ‚îî‚îÄ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã 3 ‚úÖ

5. –ù–û! –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–±—Ä–æ—Å–∏—Ç URL –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –ø—É—Å—Ç–æ–π
   ‚îú‚îÄ mergedState.page = 3 (–∏–∑ sessionStorage)
   ‚îî‚îÄ –ù–û params.page –≤—Å–µ –µ—â–µ 3 (useState –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
   ‚îî‚îÄ –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å–±—Ä–æ—Å—É
```

---

## üí• –ü–æ—á–µ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–∏–≥–∞–Ω–∏–µ –∏ —Å–±—Ä–æ—Å –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É?

### –ì–∏–ø–æ—Ç–µ–∑–∞ 1: React Query –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–µ—à –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL

**–í–æ–∑–º–æ–∂–Ω–æ:**

1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è page=3
2. URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å `?` –Ω–∞ `?page=3`
3. Next.js App Router –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
4. React Query –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ queryKey (–∏–∑-–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL?)
5. –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–µ—à –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–Ω–æ–≤–æ
6. –ù–æ –µ—Å–ª–∏ queryKey –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å page=1

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ù—É–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è queryKey –≤ `getListQueryKey`.

---

### –ì–∏–ø–æ—Ç–µ–∑–∞ 2: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º URL –∏ –∑–∞–≥—Ä—É–∑–∫–æ–π –¥–∞–Ω–Ω—ã—Ö

**–í–æ–∑–º–æ–∂–Ω–æ:**

1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Å URL –ø—É—Å—Ç—ã–º
2. `params` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å page=3 (–∏–∑ sessionStorage)
3. React Query –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –¥–ª—è page=3
4. –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ useEffect –æ–±–Ω–æ–≤–ª—è–µ—Ç URL –Ω–∞ `?page=3`
5. –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä
6. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ —á—Ç–æ-—Ç–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç `params` –Ω–∞ page=1
7. React Query –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ queryKey –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç page=1

---

### –ì–∏–ø–æ—Ç–µ–∑–∞ 3: –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ—Ä—è–¥–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è useEffect

**–í–æ–∑–º–æ–∂–Ω–æ:**

1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
2. `params` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å page=3
3. React Query –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É
4. useEffect —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å URL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
5. –û–±–Ω–æ–≤–ª—è–µ—Ç URL –Ω–∞ `?page=3`
6. –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä
7. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ `mergedState` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
8. –ï—Å–ª–∏ `mergedState.page` –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç `params.page`, –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç

---

## üéØ –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –±—ã—Ç—å "—É–º–Ω—ã–º" –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å—Ç–∏–Ω—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

1. **URL** - –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
2. **sessionStorage** - –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
3. **React state (params)** - –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–ù–æ:**

- `useState` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ URL ‚Üí params
- –ï—Å—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è params ‚Üí URL
- –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ)

### –í–∞—Ä–∏–∞–Ω—Ç 1: URL –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

**–ü–æ–¥—Ö–æ–¥:**

- URL –≤—Å–µ–≥–¥–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- sessionStorage –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–¥—É—Ç —á–µ—Ä–µ–∑ URL

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ mergeListState –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è URL.

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: React state –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

**–ü–æ–¥—Ö–æ–¥:**

- `params` - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- URL –∏ sessionStorage —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å `params` (–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: URL/sessionStorage ‚Üí params (–æ–¥–∏–Ω —Ä–∞–∑)
- –ü–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: params ‚Üí URL/sessionStorage

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é URL ‚Üí params –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL –∏–∑–≤–Ω–µ (–±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è).

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å —á–µ—Ç–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º

**–ü–æ–¥—Ö–æ–¥:**

- –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: URL > sessionStorage > defaults ‚Üí params
- –ü–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: params ‚Üí URL/sessionStorage
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL –∏–∑–≤–Ω–µ: URL ‚Üí params (—á–µ—Ä–µ–∑ useEffect —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –æ—Ç searchParams)

**–¢—Ä–µ–±—É–µ—Ç:**

- –î–æ–±–∞–≤–∏—Ç—å useEffect –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ searchParams ‚Üí params
- –£–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ useEffect'–∞–º–∏

---

## üìã –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ

### –ü—Ä–æ–±–ª–µ–º–∞ 1: useState –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ mergedState

**–§–∞–π–ª:** `use-list-params.ts`, —Å—Ç—Ä–æ–∫–∏ 76-80

```typescript
// mergedState –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
const mergedState = mergeListState(...);

// –ù–û useState –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
const [params, setParamsState] = useState({
  page: mergedState.page,  // ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ!
});
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å useEffect –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

```typescript
useEffect(() => {
  setParamsState({
    page: mergedState.page,
    limit: mergedState.limit,
    search: mergedState.search || undefined,
  });
}, [mergedState.page, mergedState.limit, mergedState.search]);
```

**–ù–û:** –≠—Ç–æ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª, –µ—Å–ª–∏ mergedState –∑–∞–≤–∏—Å–∏—Ç –æ—Ç params!

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ URL ‚Üí params

**–§–∞–π–ª:** `use-list-params.ts`

**–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**

```typescript
// –ù—É–∂–µ–Ω useEffect –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ URL ‚Üí params
useEffect(() => {
  const urlPage = searchParams.get("page");
  const urlSearch = searchParams.get("search");

  if (urlPage && parseInt(urlPage, 10) !== params.page) {
    setParams({ page: parseInt(urlPage, 10) });
  }
  // ...
}, [searchParams]);
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ useEffect'–∞–º–∏

**–§–∞–π–ª:** `use-list-params.ts`

**–ï—Å—Ç—å 3 useEffect'–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å:**

1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ sessionStorage (—Å—Ç—Ä–æ–∫–∞ 134)
2. Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞ (—Å—Ç—Ä–æ–∫–∞ 143)
3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å URL (—Å—Ç—Ä–æ–∫–∞ 156)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–Ω–∏ –º–æ–≥—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã.

---

## üéØ –í—ã–≤–æ–¥—ã

### –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å 3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏—Å—Ç–∏–Ω—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

1. `useState` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑, –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL/sessionStorage
2. –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ URL ‚Üí params –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL –∏–∑–≤–Ω–µ
3. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ useEffect'—ã –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
4. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º

### –ü–æ—á–µ–º—É –º–∏–≥–∞–µ—Ç –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:

1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è page=3
2. –ß—Ç–æ-—Ç–æ (–≤–æ–∑–º–æ–∂–Ω–æ, –∫–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É useEffect'–∞–º–∏) —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç `params` –Ω–∞ page=1
3. React Query –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ queryKey –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è page=1
4. –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –º–∏–≥–∞–Ω–∏–µ (–¥–∞–Ω–Ω—ã–µ page=3 ‚Üí –¥–∞–Ω–Ω—ã–µ page=1)

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é: URL)
2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** (–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è: URL ‚Üí params ‚Üí React Query)
3. **–£–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã** –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ useEffect'–∞–º–∏
4. **–î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é URL ‚Üí params** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL –∏–∑–≤–Ω–µ

---

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞ (–ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ)

```
–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  ‚Üì
–ß—Ç–µ–Ω–∏–µ URL (–º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º)
  ‚Üì
–ß—Ç–µ–Ω–∏–µ sessionStorage (page: 3)
  ‚Üì
mergeListState: URL (null) < sessionStorage (3) ‚Üí mergedState.page = 3
  ‚Üì
useState –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è: params.page = 3 ‚úÖ
  ‚Üì
React Query –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É: queryKey –≤–∫–ª—é—á–∞–µ—Ç page: 3 ‚úÖ
  ‚Üì
useEffect —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å URL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
  ‚Üì
updateURL({ page: 3 }) ‚Üí URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ ?page=3
  ‚Üì
Next.js App Router —Ä–µ–∞–≥–∏—Ä—É–µ—Ç ‚Üí –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è
  ‚Üì
searchParams —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç page=3
  ‚Üì
mergedState –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è: page = 3 (–∏–∑ URL)
  ‚Üì
–ù–û useState —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
  ‚Üì
‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ï—Å–ª–∏ URL –∏–∑–º–µ–Ω–∏—Ç—Å—è –∏–∑–≤–Ω–µ, params –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è
  ‚Üì
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–±—Ä–æ—Å–∏—Ç params –Ω–∞ page=1
  ‚Üì
React Query –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ queryKey
  ‚Üì
–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è page=1 ‚ùå
  ‚Üì
–ú–ò–ì–ê–ù–ò–ï: –î–∞–Ω–Ω—ã–µ page=3 ‚Üí –¥–∞–Ω–Ω—ã–µ page=1
```

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ü–æ–¥—Ö–æ–¥: URL –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

1. **–ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:**

   - –ß–∏—Ç–∞–µ–º URL
   - –ï—Å–ª–∏ URL –ø—É—Å—Ç–æ–π ‚Üí —á–∏—Ç–∞–µ–º sessionStorage –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º URL
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º params –∏–∑ URL

2. **–ü–æ—Å–ª–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

   - params —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å URL (–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è: URL ‚Üí params)
   - params ‚Üí React Query
   - params ‚Üí sessionStorage (–¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)

3. **–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL –∏–∑–≤–Ω–µ:**
   - searchParams –∏–∑–º–µ–Ω—è–µ—Ç—Å—è
   - useEffect –æ–±–Ω–æ–≤–ª—è–µ—Ç params
   - React Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- –û–¥–∏–Ω —á–µ—Ç–∫–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å `use-list-params` —Å URL –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã
2. –£–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É useEffect'–∞–º–∏
3. –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é URL ‚Üí params
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
