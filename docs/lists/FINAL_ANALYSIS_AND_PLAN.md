# –§–∏–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –ø–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 2025-01-28  
**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω, –ø–ª–∞–Ω –≥–æ—Ç–æ–≤

---

## üîç –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL –≤ Next.js App Router

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

```typescript
// 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç "–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞"
onPageChange={(newPage) => {
  setParams({ page: newPage });  // newPage = 2
}}

// 2. setParams –≤—ã–∑—ã–≤–∞–µ—Ç updateURL
updateURL({ page: 2 });

// 3. updateURL –≤—ã–∑—ã–≤–∞–µ—Ç router.replace
router.replace('?page=2', { scroll: false });

// 4. –ü–†–û–ë–õ–ï–ú–ê: router.replace –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π!
//    searchParams –µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è –≤ —ç—Ç–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
//    params –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑ –°–¢–ê–†–û–ì–û searchParams (page=1)
//    React Query –≤–∏–¥–∏—Ç —Å—Ç–∞—Ä—ã–π queryKey –∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** UI –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è.

---

## üìö –ö–∞–∫ —ç—Ç–æ —Ä–µ—à–∞—é—Ç –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ Next.js App Router:

**1. URL –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã**

- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL
- –ù–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ state
- –ù–µ—Ç sessionStorage –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `startTransition` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL**

- –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –ü–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ UI
- –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏

**3. –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è URL**

- Next.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL
- `useSearchParams` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- React Query –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ queryKey –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

---

## üéØ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –Ω–∞—à–µ–≥–æ –∫–µ–π—Å–∞

### –í–∞—Ä–∏–∞–Ω—Ç: URL –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã + `startTransition`

**–ü–æ—á–µ–º—É —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç:**

1. ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç Next.js - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
2. ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `startTransition`
3. ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ - –Ω–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. ‚úÖ –£–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã - –Ω–µ—Ç sessionStorage
5. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å sessionStorage:**

- ‚ùå **–£–±—Ä–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é** - –æ–Ω —Å–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ –Ω–µ –Ω—É–∂–µ–Ω
- ‚úÖ –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localStorage –¥–ª—è –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã), –Ω–æ –Ω–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ö—É–∫–∞ (—É–±—Ä–∞—Ç—å sessionStorage)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `use-list-params.ts`:**

1. **–£–±—Ä–∞—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã sessionStorage:**

   ```typescript
   // –£–ë–†–ê–¢–¨:
   - loadListState
   - saveListState
   - hasRestoredRef
   - useEffect –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
   - useEffect –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
   ```

2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å —á—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

   ```typescript
   // –ë–´–õ–û: —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å mergeListState
   // –°–¢–ê–õ–û: –ø—Ä–æ—Å—Ç–æ–µ —á—Ç–µ–Ω–∏–µ –∏–∑ URL
   const page = parseInt(searchParams.get("page") || "1", 10);
   const limit = parseInt(searchParams.get("limit") || pageSize.toString(), 10);
   const search = searchParams.get("search") || "";
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å `startTransition` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL:**

   ```typescript
   import { useTransition } from "react";

   const [isPending, startTransition] = useTransition();

   const updateURL = (updates) => {
     startTransition(() => {
       const params = new URLSearchParams(searchParams.toString());
       // ... –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ params
       router.replace(`?${params.toString()}`, { scroll: false });
     });
   };
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –•—É–∫ —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ—â–µ (~100 —Å—Ç—Ä–æ–∫ –≤–º–µ—Å—Ç–æ 218)
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å sessionStorage
- URL - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

---

### –≠—Ç–∞–ø 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã React Query

**–ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ç–æ–º, —á—Ç–æ:**

- `params` —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ `useMemo`
- React Query –Ω–µ –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**

- `useMemo` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç
- React Query –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `[page, limit, search]`
- –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å queryKey –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

---

### –≠—Ç–∞–ø 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

1. **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É 2:**

   - –ö–ª–∏–∫ "Next" ‚Üí URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üí –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–ª—è page=2

2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**

   - –í—ã–±–æ—Ä "50" ‚Üí URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üí –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å limit=50

3. **–ü–æ–∏—Å–∫:**

   - –í–≤–æ–¥ "test" ‚Üí debounce 300ms ‚Üí URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ‚Üí –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

4. **–ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:**

   - –ù–∞–∂–∞—Ç—å "–ù–∞–∑–∞–¥" ‚Üí URL –∏–∑–º–µ–Ω—è–µ—Ç—Å—è ‚Üí –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è ‚Üí –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
   - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ ?page=3 ‚Üí –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç page=3 –∏–∑ URL ‚Üí –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

---

## üîß –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è `use-list-params.ts`:

```typescript
"use client";

import {
  useState,
  useEffect,
  useCallback,
  useMemo,
  useTransition,
} from "react";
import { useSearchParams, useRouter } from "next/navigation";
import type { LoadParams } from "../types/list-types";

export function useListParams({
  projectId,
  serviceType,
  pageSize,
}: UseListParamsOptions): UseListParamsReturn {
  const searchParams = useSearchParams();
  const router = useRouter();
  const [isPending, startTransition] = useTransition();

  // –ß–∏—Ç–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ URL (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã)
  const urlPage = searchParams.get("page");
  const urlLimit = searchParams.get("limit");
  const urlSearch = searchParams.get("search");

  // –ü–∞—Ä—Å–∏–Ω–≥ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
  const page = urlPage ? Math.max(1, parseInt(urlPage, 10)) : 1;
  const limit = urlLimit ? Math.max(1, parseInt(urlLimit, 10)) : pageSize;
  const search = urlSearch || "";

  // –°—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ–º params –¥–ª—è React Query
  const params: LoadParams = useMemo(
    () => ({
      page,
      limit,
      search: search || undefined,
    }),
    [page, limit, search]
  );

  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ UI (–¥–ª—è debounce)
  const [searchInput, setSearchInputState] = useState(search);

  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º searchInput —Å URL –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL –∏–∑–≤–Ω–µ
  useEffect(() => {
    setSearchInputState(search);
  }, [search]);

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL (—Å startTransition)
  const updateURL = useCallback(
    (updates: { page?: number; limit?: number; search?: string }) => {
      startTransition(() => {
        const params = new URLSearchParams(searchParams.toString());

        // –û–±–Ω–æ–≤–ª—è–µ–º page
        if (updates.page !== undefined) {
          if (updates.page === 1) {
            params.delete("page");
          } else {
            params.set("page", updates.page.toString());
          }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º limit
        if (updates.limit !== undefined) {
          if (updates.limit === pageSize) {
            params.delete("limit");
          } else {
            params.set("limit", updates.limit.toString());
          }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º search
        if (updates.search !== undefined) {
          if (updates.search === "") {
            params.delete("search");
          } else {
            params.set("search", updates.search);
          }
        }

        router.replace(`?${params.toString()}`, { scroll: false });
      });
    },
    [searchParams, router, pageSize]
  );

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  const setParams = useCallback(
    (updates: Partial<LoadParams>) => {
      const urlUpdates: { page?: number; limit?: number; search?: string } = {};

      if (updates.page !== undefined) urlUpdates.page = updates.page;
      if (updates.limit !== undefined) urlUpdates.limit = updates.limit;
      if (updates.search !== undefined) urlUpdates.search = updates.search;

      updateURL(urlUpdates);
    },
    [updateURL]
  );

  // Debounce –¥–ª—è –ø–æ–∏—Å–∫–∞
  useEffect(() => {
    const timer = setTimeout(() => {
      updateURL({
        search: searchInput || "",
        page: 1,
      });
    }, 300);

    return () => clearTimeout(timer);
  }, [searchInput, updateURL]);

  return {
    params,
    setParams,
    searchInput,
    setSearchInput: setSearchInputState,
  };
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

- ‚úÖ –£–±—Ä–∞–Ω–æ: –≤—Å–µ sessionStorage
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: `useTransition` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–æ: —á—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–æ: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL

---

## üéØ –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ë—ã–ª–æ:**

- `setParams({ limit: 50 })` ‚Üí `updateURL` ‚Üí `router.replace`
- `searchParams` –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É
- `params` –æ—Å—Ç–∞–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–º
- React Query –Ω–µ –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–°—Ç–∞–Ω–µ—Ç:**

- `setParams({ limit: 50 })` ‚Üí `startTransition` ‚Üí `router.replace`
- `startTransition` –ø–æ–º–µ—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∫ –ø–µ—Ä–µ—Ö–æ–¥
- Next.js –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `searchParams` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- `params` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- React Query –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ queryKey
- –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è ‚úÖ

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ –∏ —Ç–æ –∂–µ —Ä–µ—à–µ–Ω–∏–µ:**

- `startTransition` —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏
- Next.js –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ü–æ–¥—Ö–æ–¥                    | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è                  |
| ------------------------- | --------- | ---------- | ------------- | ----------------------------- |
| **URL + startTransition** | –ù–∏–∑–∫–∞—è    | –í—ã—Å–æ–∫–∞—è    | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê    | ‚úÖ **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**          |
| **URL + sessionStorage**  | –°—Ä–µ–¥–Ω—è—è   | –°—Ä–µ–¥–Ω—è—è    | ‚≠ê‚≠ê‚≠ê        | ‚ùå –¢–µ–∫—É—â–∏–π (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π)       |
| **URL + localStorage**    | –°—Ä–µ–¥–Ω—è—è   | –í—ã—Å–æ–∫–∞—è    | ‚≠ê‚≠ê‚≠ê‚≠ê      | ‚ö†Ô∏è –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å |
| **nuqs –±–∏–±–ª–∏–æ—Ç–µ–∫–∞**       | –ù–∏–∑–∫–∞—è    | –í—ã—Å–æ–∫–∞—è    | ‚≠ê‚≠ê‚≠ê‚≠ê      | ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞               |

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: **URL –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã + `startTransition`**

**–ü–æ—á–µ–º—É:**

1. ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç Next.js - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
2. ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏
3. ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ - –Ω–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. ‚úÖ –£–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã - –Ω–µ—Ç sessionStorage
5. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

1. –£–±—Ä–∞—Ç—å sessionStorage –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –î–æ–±–∞–≤–∏—Ç—å `useTransition` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL
3. –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ö—É–∫ –¥–æ –º–∏–Ω–∏–º—É–º–∞
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞

---

## üìù –ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –®–∞–≥ 1: –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ö—É–∫ (—É–±—Ä–∞—Ç—å sessionStorage)

- –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã `loadListState` –∏ `saveListState`
- –£–±—Ä–∞—Ç—å –ª–æ–≥–∏–∫—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å —á—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å `startTransition`

- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `useTransition`
- –û–±–µ—Ä–Ω—É—Ç—å `router.replace` –≤ `startTransition`

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

- –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ü–æ–∏—Å–∫
- –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### –®–∞–≥ 4: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

- –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –û–ø–∏—Å–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥

---

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

–ï—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ "–∑–∞–ø–æ–º–∏–Ω–∞—Ç—å" —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏:

**–í–∞—Ä–∏–∞–Ω—Ç:** localStorage –¥–ª—è –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```typescript
// –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∏–∑–∏—Ç–µ —á–∏—Ç–∞–µ–º –∏–∑ localStorage
const savedLimit = localStorage.getItem(
  `list-limit-${projectId}-${serviceType}`
);
const initialLimit = savedLimit ? parseInt(savedLimit, 10) : pageSize;

// –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
useEffect(() => {
  if (limit !== pageSize) {
    localStorage.setItem(
      `list-limit-${projectId}-${serviceType}`,
      limit.toString()
    );
  }
}, [limit, projectId, serviceType, pageSize]);
```

**–ù–æ:** –≠—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É. –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ URL.

---

## üí° –í—ã–≤–æ–¥—ã

1. **sessionStorage –Ω–µ –Ω—É–∂–µ–Ω** - —Å–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ –Ω–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É
2. **URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç Next.js
3. **`startTransition` —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥
4. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –ª—É—á—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** - –º–µ–Ω—å—à–µ –∫–æ–¥–∞, –º–µ–Ω—å—à–µ –±–∞–≥–æ–≤

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å `startTransition`.
