# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: URL –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

**–î–∞—Ç–∞:** 2025-01-28  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ Next.js App Router:**
- URL - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ß–∏—Ç–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `searchParams`
- –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ URL, Next.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- React Query —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è `params` (–∏–∑ URL)
- –ù–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ state - —É–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

---

## üìù –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –£–ø—Ä–æ—â–µ–Ω `use-list-params.ts`

**–ë—ã–ª–æ (—Å–ª–æ–∂–Ω—ã–π –ø–æ–¥—Ö–æ–¥):**
- –õ–æ–∫–∞–ª—å–Ω—ã–π state –¥–ª—è –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è state ‚Üî URL —á–µ—Ä–µ–∑ `useEffect`
- `startTransition` –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
- 214 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

**–°—Ç–∞–ª–æ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥):**
- URL - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- –ß–∏—Ç–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `searchParams`
- –û–±–Ω–æ–≤–ª—è–µ–º URL –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `router.replace`
- 150 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ (-30%)

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (page, limit, search)
   ‚Üì
2. setParams ‚Üí updateURL ‚Üí router.replace
   ‚Üì
3. Next.js App Router —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ URL
   ‚Üì
4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ searchParams
   ‚Üì
5. params –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑ –Ω–æ–≤—ã—Ö searchParams (useMemo)
   ‚Üì
6. React Query –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ queryKey (params –∏–∑–º–µ–Ω–∏–ª—Å—è)
   ‚Üì
7. React Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
   ‚Üì
8. placeholderData –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**
   - –ú–µ–Ω—å—à–µ –∫–æ–¥–∞
   - –ù–µ—Ç —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
   - –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (URL)
   - –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É state –∏ URL
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ Next.js

3. **–†–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏**
   - –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–ù–∞–∑–∞–¥/–í–ø–µ—Ä–µ–¥)
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å `placeholderData`

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### 1. –ß—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ URL

```typescript
const urlPage = searchParams.get("page");
const urlLimit = searchParams.get("limit");
const urlSearch = searchParams.get("search");

// –ü–∞—Ä—Å–∏–Ω–≥ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
const page = urlPage ? Math.max(1, parseInt(urlPage, 10)) : 1;
const limit = urlLimit ? Math.max(1, parseInt(urlLimit, 10)) : pageSize;
const search = urlSearch || "";
```

### 2. –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è params –¥–ª—è React Query

```typescript
const params: LoadParams = useMemo(
  () => ({
    page,
    limit,
    search: search || undefined,
  }),
  [page, limit, search]
);
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL

```typescript
const updateURL = (updates) => {
  const currentParams = new URLSearchParams(searchParams.toString());
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  if (updates.page !== undefined) {
    if (updates.page === 1) {
      currentParams.delete("page");
    } else {
      currentParams.set("page", updates.page.toString());
    }
  }
  
  // –û–±–Ω–æ–≤–ª—è–µ–º URL
  const newUrl = currentParams.toString()
    ? `${pathname}?${currentParams.toString()}`
    : pathname;
  router.replace(newUrl, { scroll: false });
};
```

### 4. React Query —Å placeholderData

```typescript
const { data, isLoading, isFetching } = useQuery({
  queryKey: getListQueryKey(projectId, serviceType, params),
  queryFn: () => onLoadData(params),
  placeholderData: (previousData) => previousData, // –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
});
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ê—Å–ø–µ–∫—Ç | –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (URL) |
|--------|-------------------------|--------------------------|
| –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è |
| –ö–æ–¥ | 214 —Å—Ç—Ä–æ–∫ | 150 —Å—Ç—Ä–æ–∫ |
| –ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏—Å—Ç–∏–Ω—ã | 2 (state + URL) | 1 (URL) |
| –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã | –í–æ–∑–º–æ–∂–Ω—ã | –ù–µ—Ç |
| –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—Å—Ç—å | –ö–∞—Å—Ç–æ–º–Ω—ã–π | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Next.js |

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ URL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ React Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å `placeholderData`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ Next.js App Router

---

## üìö –°—Å—ã–ª–∫–∏

- **Next.js App Router:** https://nextjs.org/docs/app/building-your-application/routing
- **React Query:** https://tanstack.com/query/latest
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:** `docs/lists/STANDARD_APPROACHES.md`

