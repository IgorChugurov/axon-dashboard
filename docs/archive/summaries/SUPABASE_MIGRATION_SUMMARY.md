# ‚úÖ –ò—Ç–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Supabase

## üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ Backend API –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞:**

- –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `NEXT_PUBLIC_API_URL` –∏ –æ–±—Ä–∞—â–∞–ª—Å—è –∫ –≤–Ω–µ—à–Ω–µ–º—É backend
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ: `Backend URL: https://api.dev-templates-administration.opiesoftware.com/api/projects`

**–†–µ—à–µ–Ω–∏–µ:**

- –°–æ–∑–¥–∞–Ω `lib/projects/supabase.ts` - —Ä–∞–±–æ—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é —Å Supabase
- –û–±–Ω–æ–≤–ª–µ–Ω `lib/projects/server.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase —Ñ—É–Ω–∫—Ü–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω `app/api/projects/route.ts` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Supabase

**–¢–µ–ø–µ—Ä—å:**

- ‚úÖ –†–∞–±–æ—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é —Å Supabase —Ç–∞–±–ª–∏—Ü–µ–π `projects`
- ‚úÖ RLS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ backend

---

### 2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫

**–ü–∞–≥–∏–Ω–∞—Ü–∏—è:**

```typescript
// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: page, limit
GET /api/projects?page=1&limit=10

// –í Supabase:
query.range(offset, offset + limit - 1)
```

**–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏:**

```typescript
// –ü–∞—Ä–∞–º–µ—Ç—Ä: search
GET /api/projects?search=test

// –í Supabase:
query.ilike("name", `%${search}%`)
```

**–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:**

```typescript
// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: sortBy, sortOrder
GET /api/projects?sortBy=name&sortOrder=asc

// –í Supabase:
query.order(sortBy, { ascending: sortOrder === "asc" })
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```json
{
  "data": [...],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 50,
    "totalPages": 5,
    "hasPreviousPage": false,
    "hasNextPage": true
  }
}
```

---

### 3. ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω logout –∫ Navbar –∏ Sidebar

**Navbar (`components/Navbar.tsx`):**

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useAuth().logout()`
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤ dropdown –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç loading —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**Sidebar (`components/AppSidebar.tsx`):**

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useAuth().logout()`
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤ footer dropdown
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ email
- ‚úÖ –ò–∫–æ–Ω–∫–∞ LogOut

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏

### –§–ª–æ—É –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤:

```
1. Client ‚Üí GET /api/projects?page=1&limit=10&search=test
   ‚Üì
2. API Route ‚Üí getServerUser() (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
   ‚Üì
3. getProjectsFromSupabase(params)
   ‚Üì
4. Supabase Query:
   - .from("projects")
   - .select("*", { count: "exact" })
   - .ilike("name", "%test%") // –µ—Å–ª–∏ –µ—Å—Ç—å search
   - .order("created_at", { ascending: false })
   - .range(0, 9) // –ø–∞–≥–∏–Ω–∞—Ü–∏—è
   ‚Üì
5. RLS –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ê–¥–º–∏–Ω—ã ‚Üí –≤–∏–¥—è—Ç –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏
   ‚Üì
6. –í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
```

---

## üîÑ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π API Route

**–í–∞–∂–Ω–æ:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π route `/api/[entity]` –æ—Å—Ç–∞–ª—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –æ–Ω–∏ –µ—â–µ –Ω–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã).

**–î–ª—è projects:**

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π route `/api/projects`
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å Supabase
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–π backend

**–î–ª—è –¥—Ä—É–≥–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π:**

- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/api/[entity]` (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω —Å—Ç–∞—Ä—ã–π backend)
- –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ routes –∫–∞–∫ –¥–ª—è projects

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

1. ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Supabase**

   - OAuth (Google, GitHub)
   - Email/Password
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

2. ‚úÖ **–†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏**

   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
   - RLS –∑–∞—â–∏—Ç–∞

3. ‚úÖ **Logout**

   - –í Navbar
   - –í Sidebar
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–µ—Å—Å–∏–∏

4. ‚úÖ **–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞**
   - superAdmin, admin, user
   - Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª—å
   - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /welcome –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ superAdmin:

```
Email: igorchugurov@gmail.com
Password: 1234567!Igor
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:

```bash
POST /api/projects
{
  "name": "Test Project",
  "description": "My first project"
}
```

### 3. –ü–æ–ª—É—á–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π:

```bash
GET /api/projects?page=1&limit=10
```

### 4. –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏:

```bash
GET /api/projects?search=test
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ logout:

- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∞–≤–∞—Ç–∞—Ä –≤ Navbar ‚Üí Logout
- –ò–ª–∏ –≤ Sidebar footer ‚Üí Sign out

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `lib/projects/supabase.ts` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª
2. ‚úÖ `lib/projects/server.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω
3. ‚úÖ `lib/projects/types.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã
4. ‚úÖ `app/api/projects/route.ts` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Supabase
5. ‚úÖ `components/ProjectsList.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è Supabase –ø–æ–ª–µ–π
6. ‚úÖ `components/Navbar.tsx` - –ø–æ–¥–∫–ª—é—á–µ–Ω logout
7. ‚úÖ `components/AppSidebar.tsx` - –ø–æ–¥–∫–ª—é—á–µ–Ω logout
8. ‚úÖ `app/page.tsx` - —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∫–æ–¥

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Supabase:

- ‚úÖ –ù–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ backend
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Logout –ø–æ–¥–∫–ª—é—á–µ–Ω –≤–µ–∑–¥–µ
- ‚úÖ RLS –∑–∞—â–∏—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
