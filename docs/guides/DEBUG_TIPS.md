# üêõ –°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–ª–∞–¥–∫–µ –≤ Next.js 15

## –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–≥–∏ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ

–ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç `redirect()`, –±—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –æ—á–∏—â–∞–µ—Ç –∫–æ–Ω—Å–æ–ª—å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: Preserve Log (–õ—É—á—à–∏–π —Å–ø–æ—Å–æ–±!)

### –í Chrome/Edge/Brave:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **DevTools** (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
3. –ù–∞–π–¥–∏—Ç–µ —á–µ–∫–±–æ–∫—Å **‚òê Preserve log** –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –∫–æ–Ω—Å–æ–ª–∏
4. **–ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É** ‚úÖ

**–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏/—Ä–µ–¥–∏—Ä–µ–∫—Ç–∞—Ö!**

### –í Firefox:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **DevTools** (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
3. –ò–∫–æ–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (‚öôÔ∏è) —Å–ø—Ä–∞–≤–∞
4. –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É **‚òê Persist Logs**

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º

–Ø –¥–æ–±–∞–≤–∏–ª **3-—Å–µ–∫—É–Ω–¥–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É** –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –≤ –∫–æ–¥.

–¢–µ–ø–µ—Ä—å –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
Server  [Page] Refresh failed, redirecting to login
Server  [Page] ‚ö†Ô∏è REDIRECT IN 3 SECONDS - CHECK LOGS ABOVE!
```

–£ –≤–∞—Å –±—É–¥–µ—Ç **3 —Å–µ–∫—É–Ω–¥—ã** —á—Ç–æ–±—ã:

- –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ª–æ–≥–∏
- –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏

**–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–¥–∞–ª–∏—Ç–µ —ç—Ç—É –∑–∞–¥–µ—Ä–∂–∫—É!**

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 3: –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å redirect –≤—Ä–µ–º–µ–Ω–Ω–æ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `app/page.tsx`
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å `redirect("/login")`
3. –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ: `//redirect("/login")`
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

–¢–µ–ø–µ—Ä—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

- –í—Å–µ –ª–æ–≥–∏
- –û—à–∏–±–∫–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
- –°–æ—Å—Ç–æ—è–Ω–∏–µ cookies

**–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –æ—Ç–ª–∞–¥–∫–∏!**

## üìä –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:

1. ‚úÖ –í–∫–ª—é—á–∏—Ç–µ **Preserve log** –≤ DevTools
2. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ **Console** –≤ DevTools
3. ‚úÖ –û—á–∏—Å—Ç–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å (Ctrl+L)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (—É–¥–∞–ª–∏—Ç–µ accessToken, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏ —Ç.–¥.)
2. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. –õ–æ–≥–∏ **–ù–ï –∏—Å—á–µ–∑–Ω—É—Ç** –ø—Ä–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ
4. –ú–æ–∂–µ—Ç–µ —Å–∫—Ä–æ–ª–ª–∏—Ç—å –Ω–∞–∑–∞–¥ –∏ —á–∏—Ç–∞—Ç—å –≤—Å–µ –ª–æ–≥–∏

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞:

1. –û—á–∏—Å—Ç–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å (Ctrl+L)
2. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ—Å—Ç

## üéØ –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ DevTools Console:

### –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞—à–∏ –ª–æ–≥–∏:

```
[Page]
```

–∏–ª–∏

```
[ServerAction]
```

–∏–ª–∏

```
[Utils]
```

–í–≤–µ–¥–∏—Ç–µ —ç—Ç–æ –≤ –ø–æ–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞ —Å–≤–µ—Ä—Ö—É –∫–æ–Ω—Å–æ–ª–∏.

### –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏:

- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É **Errors** –≤ –≤–µ—Ä—Ö–Ω–µ–π –ø–∞–Ω–µ–ª–∏

### –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —É—Ä–æ–≤–Ω–∏:

- –í—ã–±–µ—Ä–∏—Ç–µ **All levels** –∏–ª–∏ **Verbose**

## üì∏ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–∫—Ä–∏–Ω—à–æ—Ç

- Windows: Win + Shift + S
- Mac: Cmd + Shift + 4

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ –ª–æ–≥–µ
2. "Save as..." –∏–ª–∏ "Copy"

### –í–∞—Ä–∏–∞–Ω—Ç 3: –≠–∫—Å–ø–æ—Ä—Ç

1. –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. "Save as..." ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª

## üîç –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π refresh:

```
[Utils] Reading cookies: {hasAccessToken: false, hasRefreshToken: true, ...}
[Page] Tokens expired or missing, refreshing...
[ServerAction] Refreshing tokens...
[ServerAction] Tokens refreshed successfully
[Page] After refresh: {hasTokens: true, ...}
[Page] Refresh successful, continuing...
```

### ‚ùå –ù–µ—É–¥–∞—á–Ω—ã–π refresh (400):

```
[Utils] Reading cookies: {hasAccessToken: false, hasRefreshToken: true, ...}
[Page] Tokens expired or missing, refreshing...
[ServerAction] Refreshing tokens...
[ServerAction] Refresh failed: 400 Bad Request
[Page] After refresh: {hasTokens: false, ...}
[Page] Refresh failed, redirecting to login
[Page] ‚ö†Ô∏è REDIRECT IN 3 SECONDS - CHECK LOGS ABOVE!
```

### ‚ùå –û—à–∏–±–∫–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ cookies:

```
Error: Cookies can only be modified in a Server Action or Route Handler
```

‚Üí –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ - –∑–Ω–∞—á–∏—Ç –≥–¥–µ-—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è Server Action –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ cookies –∏–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## üöÄ –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### –£–¥–∞–ª–∏—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –∫–æ–¥–µ:

–í `app/page.tsx` –Ω–∞–π–¥–∏—Ç–µ –∏ —É–¥–∞–ª–∏—Ç–µ:

```typescript
// –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (—É–¥–∞–ª–∏—Ç–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
await new Promise((resolve) => setTimeout(resolve, 3000));
```

### –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ redirects:

–ï—Å–ª–∏ –≤—ã –∏—Ö –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

## üí° Pro Tips:

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Network tab

- –°–º–æ—Ç—Ä–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/authentication/refresh-tokens`
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã (200, 400, 401)
- –°–º–æ—Ç—Ä–∏—Ç–µ Response body

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Application tab

- –°–º–æ—Ç—Ä–∏—Ç–µ cookies –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í–∏–¥–∏—Ç–µ –∫–æ–≥–¥–∞ –æ–Ω–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- –ú–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Sources tab

- –°—Ç–∞–≤—å—Ç–µ breakpoints –≤ –∫–æ–¥–µ
- –ü–æ—à–∞–≥–æ–≤–æ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –∫–æ–¥
- –°–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

## üéì –†–µ–∑—é–º–µ:

**–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞–π—Ç–µ **Preserve log** –≤ DevTools!

–≠—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –ª–æ–≥–∏ –ø—Ä–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞—Ö –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞—Ö —Å—Ç—Ä–∞–Ω–∏—Ü.

–£–¥–∞—á–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏! üêõ‚ú®
